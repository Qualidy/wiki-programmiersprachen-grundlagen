# Java Grundlagen 2 – Kontrollstrukturen & Schleifen

!!! abstract "Lernziele"
    Nach diesem Kapitel kannst du …

    - **Kontrollstrukturen** (if/else, switch) für Entscheidungen nutzen.
    - **Schleifen** (for, while, do-while) für Wiederholungen verwenden.
    - **Break und Continue** für Schleifensteuerung.
    - **Verschachtelte Schleifen** verstehen und anwenden.
    - **Methode mit Kontrollstrukturen** schreiben.

---

## Einführung

Kontrollstrukturen und Schleifen sind die **Grundbausteine jeder Programmierung**. Sie ermöglichen:
- **Logische Entscheidungen** (if/else, switch)
- **Wiederholungen** (for, while)
- **Flexible Programmflüsse**
- **Effiziente Datenverarbeitung**

---

## If / Else

### Einfache If-Verzweigung
```java
int alter = 18;

if (alter >= 18) {
    System.out.println("Volljährig");
}
```

### If-Else
```java
int alter = 16;

if (alter >= 18) {
    System.out.println("Volljährig");
} else {
    System.out.println("Minderjährig");
}
```

### Else-If
```java
int punkte = 85;

if (punkte >= 90) {
    System.out.println("Sehr gut");
} else if (punkte >= 75) {
    System.out.println("Gut");
} else if (punkte >= 50) {
    System.out.println("Befriedigend");
} else {
    System.out.println("Nicht bestanden");
}
```

### Logische Operatoren
```java
int alter = 25;
boolean istAdmin = true;
boolean istAktiv = false;

// AND (beide müssen true sein)
if (alter >= 18 && istAdmin) {
    System.out.println("Zugriff erlaubt");
}

// OR (einer muss true sein)
if (istAdmin || istAktiv) {
    System.out.println("Mindestens eine Bedingung erfüllt");
}

// NOT (umkehren)
if (!istAdmin) {
    System.out.println("Kein Admin");
}
```

### Verschachtelte If-Statements
```java
int alter = 20;
boolean hatFührerschein = true;

if (alter >= 18) {
    if (hatFührerschein) {
        System.out.println("Darf Auto fahren");
    } else {
        System.out.println("Darf nicht fahren (kein Lappen)");
    }
} else {
    System.out.println("Zu jung");
}
```

{{ task(file="tasks/04_00_03.yaml") }}

---

## Switch-Statement

### Grundlegende Syntax
```java
int tag = 3;

switch (tag) {
    case 1:
        System.out.println("Montag");
        break;
    case 2:
        System.out.println("Dienstag");
        break;
    case 3:
        System.out.println("Mittwoch");
        break;
    case 4:
        System.out.println("Donnerstag");
        break;
    case 5:
        System.out.println("Freitag");
        break;
    case 6:
    case 7:
        System.out.println("Wochenende");
        break;
    default:
        System.out.println("Ungültiger Tag");
}
```

### Switch mit Strings (Java 7+)
```java
String farbe = "rot";

switch (farbe) {
    case "rot":
        System.out.println("Stopp!");
        break;
    case "gelb":
        System.out.println("Achtung!");
        break;
    case "grün":
        System.out.println("Fahren!");
        break;
    default:
        System.out.println("Unbekannte Farbe");
}
```

### Switch mit Enums (Java 7+)
```java
enum Wochentag { MONTAG, DIENSTAG, MITTWOCH, DONNERSTAG, FREITAG, SAMSTAG, SONNTAG }

Wochentag tag = Wochentag.MONTAG;

switch (tag) {
    case MONTAG:
    case DIENSTAG:
    case MITTWOCH:
    case DONNERSTAG:
    case FREITAG:
        System.out.println("Arbeitstag");
        break;
    case SAMSTAG:
    case SONNTAG:
        System.out.println("Wochenende");
        break;
}
```

### Switch-Expression (Java 14+)
```java
int tag = 3;

String tagText = switch (tag) {
    case 1 -> "Montag";
    case 2 -> "Dienstag";
    case 3 -> "Mittwoch";
    case 4 -> "Donnerstag";
    case 5 -> "Freitag";
    case 6, 7 -> "Wochenende";
    default -> "Ungültig";
};

System.out.println(tagText);
```

---

## Ternary Operator

### Kurzform für if-else
```java
int alter = 20;
String status = (alter >= 18) ? "Volljährig" : "Minderjährig";
System.out.println(status);

// Entspricht:
if (alter >= 18) {
    status = "Volljährig";
} else {
    status = "Minderjährig";
}
```

### Verschachtelte Ternary
```java
int punkte = 85;
String note = punkte >= 90 ? "Sehr gut" :
              punkte >= 75 ? "Gut" :
              punkte >= 50 ? "Befriedigend" : "Nicht bestanden";
```

---

## Schleifen

### For-Schleife
```java
// Zählen von 1 bis 10
for (int i = 1; i <= 10; i++) {
    System.out.println(i);
}

// Array durchlaufen
String[] farben = {"Rot", "Grün", "Blau"};
for (int i = 0; i < farben.length; i++) {
    System.out.println(farben[i]);
}

// For-Each (Enhanced For-Loop)
for (String farbe : farben) {
    System.out.println(farbe);
}
```

### While-Schleife
```java
int counter = 0;

while (counter < 5) {
    System.out.println(counter);
    counter++;
}
```

### Do-While
```java
int x = 10;

do {
    System.out.println(x);
    x--;
} while (x > 0);
```

### Schleifen mit Break und Continue
```java
// Break: Schleife vorzeitig beenden
for (int i = 0; i < 10; i++) {
    if (i == 5) {
        break; // Stoppt bei 5
    }
    System.out.println(i);
}

// Continue: Überspringt aktuelle Iteration
for (int i = 0; i < 10; i++) {
    if (i % 2 == 0) {
        continue; // Überspringt gerade Zahlen
    }
    System.out.println(i); // Nur ungerade Zahlen
}
```

### Verschachtelte Schleifen
```java
// Multiplikationstabelle
for (int i = 1; i <= 5; i++) {
    for (int j = 1; j <= 5; j++) {
        System.out.print(i * j + "\t");
    }
    System.out.println();
}
```

### Endlosschleife
```java
// Vorsicht: Unendlich, bis break
while (true) {
    // Wird nie erreicht ohne break
    break;
}

// Do-While mit break
int i = 0;
do {
    if (i == 3) {
        break;
    }
    System.out.println(i);
    i++;
} while (true);
```

{{ task(file="tasks/04_00_04.yaml") }}

---

## Praktische Beispiele

### Beispiel 1: Zahlentabelle
```java
public class Zahlentabelle {
    public static void main(String[] args) {
        for (int i = 1; i <= 10; i++) {
            if (i % 2 == 0) {
                System.out.println(i + " ist gerade");
            } else {
                System.out.println(i + " ist ungerade");
            }
        }
    }
}
```

### Beispiel 2: Passwort-Prüfung
```java
public class PasswortPruefung {
    public static void main(String[] args) {
        String passwort = "Passwort123";

        if (passwort.length() < 8) {
            System.out.println("Passwort zu kurz");
        } else if (!passwort.matches(".*[A-Z].*")) {
            System.out.println("Großbuchstabe fehlt");
        } else if (!passwort.matches(".*[0-9].*")) {
            System.out.println("Ziffer fehlt");
        } else {
            System.out.println("Passwort ist stark");
        }
    }
}
```

### Beispiel 3: Zahlen-Raten
```java
import java.util.Scanner;

public class ZahlenRaten {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int ziel = 42;
        int versuch;
        int anzahl = 0;

        do {
            System.out.print("Gib eine Zahl ein: ");
            versuch = scanner.nextInt();
            anzahl++;

            if (versuch < ziel) {
                System.out.println("Zu klein!");
            } else if (versuch > ziel) {
                System.out.println("Zu groß!");
            } else {
                System.out.println("Richtig! Versuche: " + anzahl);
            }
        } while (versuch != ziel);

        scanner.close();
    }
}
```

### Beispiel 4: Primzahl-Prüfung
```java
public class PrimzahlTest {
    public static void main(String[] args) {
        int zahl = 17;
        boolean istPrim = true;

        if (zahl <= 1) {
            istPrim = false;
        } else {
            for (int i = 2; i <= Math.sqrt(zahl); i++) {
                if (zahl % i == 0) {
                    istPrim = false;
                    break;
                }
            }
        }

        System.out.println(zahl + (istPrim ? " ist prim" : " ist nicht prim"));
    }
}
```

---

## Häufige Fehler & Best Practices

### Fehler 1: Fehlende Klammern
```java
// ❌ Falsch (nur erste Zeile gehört zum if)
if (x > 5)
    System.out.println("x ist größer als 5");
    System.out.println("Immer ausgeführt");

// ✅ Gut
if (x > 5) {
    System.out.println("x ist größer als 5");
    System.out.println("Immer ausgeführt");
}
```

### Fehler 2: Unendliche Schleife
```java
// ❌ Falsch (while ohne Bedingungsänderung)
while (true) {
    System.out.println("Endlosschleife!");
}

// ✅ Gut
int i = 0;
while (i < 5) {
    System.out.println(i);
    i++; // Bedingung ändert sich
}
```

### Fehler 3: Vergessenes break in switch
```java
// ❌ Falsch (Fall-through)
switch (x) {
    case 1:
        System.out.println("Eins");
        // Fehlendes break!
    case 2:
        System.out.println("Zwei"); // Wird auch ausgeführt!
}

// ✅ Gut
switch (x) {
    case 1:
        System.out.println("Eins");
        break;
    case 2:
        System.out.println("Zwei");
        break;
}
```

### Best Practices
1. **Klammern immer verwenden** bei if/else, auch bei Einzeiler
2. **For-Each für Arrays/Listen** statt Index-Schleifen
3. **Switch für viele Cases** statt langer if-else-Ketten
4. **Break/Continue sparsam** verwenden
5. **Keine unendlichen Schleifen** ohne klaren Exit
6. **Komplexe Bedingungen** in Variablen auslagern

---

## Zusammenfassung & Checkliste

### Wichtige Konzepte
- ✅ **If/Else**: Bedingte Ausführung
- ✅ **Switch**: Mehrfach-Verzweigung
- ✅ **Ternary**: Kurzform für if-else
- ✅ **For-Schleife**: Zählschleife
- ✅ **While-Schleife**: Bedingungsschleife
- ✅ **Do-While**: Schleife mit mindestens einer Iteration
- ✅ **Break/Continue**: Schleifensteuerung

### Checkliste für Code
- [ ] Klammern bei Kontrollstrukturen
- [ ] Break in jedem switch-case
- [ ] For-Each für Arrays/Listen
- [ ] Keine unendlichen Schleifen
- [ ] Bedingungen verständlich
- [ ] Komplexe Logik kommentiert

---

## Nächste Schritte

Nachdem du diese Grundlagen beherrschst:
1. **Funktionen/Methoden** - Wiederverwendbare Code-Blöcke
2. **Arrays & Collections** - Datenstrukturen
3. **Objektorientierung** - Klassen und Objekte
4. **Exception Handling** - Fehlerbehandlung

**Empfohlene Ressourcen:**
- [Oracle Java Tutorials - Control Flow](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/flow.html)
- [JavaRanch - Control Structures](https://coderanch.com/wiki/660255-Control-Structures)
