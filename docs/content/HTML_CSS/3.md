# HTML Grundlagen 3 – Attribute & Formulare

!!! abstract "Lernziele"
    Nach diesem Kapitel kannst du …

    - **HTML-Attribute** korrekt verwenden und verstehen.
    - **Formulare** erstellen und validieren.
    - **Input-Typen** für verschiedene Daten nutzen.
    - **Formular-Sicherheit** implementieren.
    - **Barrierefreie Formulare** gestalten.

---

## Attribute im Detail

### Globale Attribute (alle Elemente)
```html
<div id="header" class="container" title="Tooltip" style="color: red;">
  Inhalt
</div>
```

| Attribut | Zweck | Beispiel |
|---|---|---|
| `id` | Eindeutige Kennung (1× pro Seite) | `id="main-content"` |
| `class` | CSS-Klassen (mehrere möglich) | `class="card primary"` |
| `title` | Tooltip-Text | `title="Mehr Infos"` |
| `style` | Inline-CSS (vermeiden!) | `style="color: red"` |
| `data-*` | Eigene Daten (für JS) | `data-user-id="123"` |

### Event-Attribute (veraltet, besser addEventListener)
```html
<!-- Veraltet, aber noch in Verwendung -->
<button onclick="alert('Klick!')">Klick</button>
<input type="text" onfocus="this.style.background='yellow'">
```

### Sprach-Attribute
```html
<html lang="de">
<p lang="en">This is English</p>
<p lang="fr">C'est français</p>
```

### Form-Attribute
```html
<form id="login-form">
  <input type="text" form="login-form" name="username">
</form>
```

---

## Formulare – Grundlagen

### Grundstruktur
```html
<form action="/submit" method="POST" enctype="multipart/form-data">
  <!-- Formular-Felder hier -->
  <button type="submit">Absenden</button>
</form>
```

**Attribute:**
- `action`: Ziel-URL für die Daten
- `method`: GET (Daten in URL) oder POST (Daten im Body)
- `enctype`: Kodierung (`application/x-www-form-urlencoded`, `multipart/form-data` für Dateien)
- `target`: `_blank`, `_self`, `_parent`, `_top`
- `autocomplete`: `on` oder `off`

### Input-Typen

#### Text-Eingaben
```html
<!-- Einfacher Text -->
<input type="text" name="username" placeholder="Benutzername" required>

<!-- Passwort (versteckt) -->
<input type="password" name="password" placeholder="Passwort" required>

<!-- Email (automatische Validierung) -->
<input type="email" name="email" placeholder="email@example.com" required>

<!-- URL -->
<input type="url" name="website" placeholder="https://example.com">

<!-- Tel -->
<input type="tel" name="phone" placeholder="+49 123 456789" pattern="[0-9\+\s-]+">
```

#### Numerische Eingaben
```html
<!-- Zahl -->
<input type="number" name="alter" min="18" max="100" value="25">

<!-- Bereich (Slider) -->
<input type="range" name="lautstärke" min="0" max="100" value="50">

<!-- Datum -->
<input type="date" name="geburtsdatum">

<!-- Zeit -->
<input type="time" name="uhrzeit">

<!-- Datetime-local -->
<input type="datetime-local" name="termin">
```

#### Auswahl
```html
<!-- Checkbox -->
<input type="checkbox" name="newsletter" value="yes" checked>
<label for="newsletter">Newsletter abonnieren</label>

<!-- Radio -->
<input type="radio" id="maennlich" name="geschlecht" value="m" checked>
<label for="maennlich">Männlich</label>

<input type="radio" id="weiblich" name="geschlecht" value="w">
<label for="weiblich">Weiblich</label>

<!-- Datei -->
<input type="file" name="dokument" accept=".pdf,.doc,.docx" multiple>
```

#### Sonstige
```html
<!-- Farbe -->
<input type="color" name="farbe" value="#ff0000">

<!-- Suchfeld -->
<input type="search" name="suche" placeholder="Suchen...">

<!-- Verstecktes Feld -->
<input type="hidden" name="csrf_token" value="abc123">
```

---

## Weitere Formular-Elemente

### `<textarea>` – Mehrzeiliger Text
```html
<label for="nachricht">Nachricht:</label>
<textarea id="nachricht" name="nachricht" rows="5" cols="50"
          placeholder="Ihre Nachricht..." required></textarea>
```

**Attribute:**
- `rows`: Anzahl sichtbarer Zeilen
- `cols`: Anzahl sichtbarer Spalten
- `maxlength`: Maximale Zeichenanzahl
- `wrap="soft"` oder `hard`

### `<select>` – Dropdown-Menü
```html
<label for="land">Land:</label>
<select id="land" name="land" required>
  <option value="">Bitte wählen</option>
  <option value="de">Deutschland</option>
  <option value="at">Österreich</option>
  <option value="ch">Schweiz</option>
  <option value="fr" selected>Frankreich</option>
</select>
```

**Mit Gruppen:**
```html
<select name="stadt">
  <optgroup label="Deutschland">
    <option value="berlin">Berlin</option>
    <option value="hamburg">Hamburg</option>
  </optgroup>
  <optgroup label="Österreich">
    <option value="wien">Wien</option>
    <option value="graz">Graz</option>
  </optgroup>
</select>
```

### `<datalist>` – Autovervollständigung
```html
<label for="browser">Browser:</label>
<input list="browsers" id="browser" name="browser">

<datalist id="browsers">
  <option value="Chrome">
  <option value="Firefox">
  <option value="Safari">
  <option value="Edge">
  <option value="Opera">
</datalist>
```

### `<button>` vs. `<input type="submit">`
```html
<!-- Beide funktionieren -->
<button type="submit">Absenden</button>
<input type="submit" value="Absenden">

<!-- Button mit Typ -->
<button type="submit">Senden</button>
<button type="reset">Zurücksetzen</button>
<button type="button" onclick="alert('Klick!')">Aktion</button>
```

---

## Formular-Validierung

### HTML5-Validierung
```html
<!-- Pflichtfeld -->
<input type="text" name="name" required>

<!-- Min/Max Länge -->
<input type="text" name="username" minlength="3" maxlength="20">

<!-- Min/Max Wert -->
<input type="number" name="alter" min="18" max="100">

<!-- Muster (Regex) -->
<input type="text" name="plz" pattern="[0-9]{5}" placeholder="12345">

<!-- Bestätigung -->
<input type="password" name="passwort" id="passwort">
<input type="password" name="passwort_bestätigung"
       oninput="this.setCustomValidity(this.value !== document.getElementById('passwort').value ? 'Passwörter stimmen nicht überein' : '')">
```

### Custom Error-Messages (JavaScript)
```html
<form id="form">
  <input type="email" id="email" required>
  <span id="error" style="color: red;"></span>
  <button type="submit">Senden</button>
</form>

<script>
  const form = document.getElementById('form');
  const email = document.getElementById('email');
  const error = document.getElementById('error');

  form.addEventListener('submit', (e) => {
    if (!email.value.includes('@')) {
      error.textContent = 'Bitte gültige E-Mail eingeben';
      e.preventDefault();
    }
  });
</script>
```

---

## Barrierefreiheit (Accessibility)

### Semantische Labels
```html
<!-- Gut: Explizites Label -->
<label for="name">Name:</label>
<input type="text" id="name" name="name">

<!-- Besser: Implizites Label -->
<label>
  Name:
  <input type="text" name="name">
</label>

<!-- Schlecht: Kein Label -->
<input type="text" name="name" placeholder="Name">
```

### ARIA-Attribute
```html
<!-- Fehlermeldungen -->
<input type="text" aria-invalid="true" aria-describedby="error-msg">
<span id="error-msg" role="alert">Fehler: Pflichtfeld</span>

<!-- Gruppierung -->
<fieldset>
  <legend>Adresse</legend>
  <label for="strasse">Straße:</label>
  <input type="text" id="strasse" name="strasse">
</fieldset>

<!-- Required -->
<label for="email">Email:</label>
<input type="email" id="email" name="email" required aria-required="true">
```

### Tastatur-Navigation
```html
<!-- Tab-Reihenfolge -->
<input type="text" tabindex="1">
<input type="text" tabindex="2">
<button type="submit" tabindex="3">Senden</button>

<!-- Deaktiviert -->
<input type="text" disabled>
<button type="button" disabled>Aktion</button>

<!-- Nur lesbar -->
<input type="text" readonly value="Nur Lesen">
```

---

## Formular-Sicherheit

### CSRF-Schutz
```html
<form action="/submit" method="POST">
  <input type="hidden" name="csrf_token" value="abc123xyz">
  <!-- Weitere Felder -->
</form>
```

### HTML-Escaping
```html
<!-- ❌ Gefährlich (XSS) -->
<input type="text" value="<script>alert('hack')</script>">

<!-- ✅ Sicher (wird automatisch escaped) -->
<input type="text" value="<script>alert('hack')</script>">
```

### Rate-Limiting (Server-seitig)
```html
<!-- Client-seitige Hinweise -->
<input type="email" name="email" autocomplete="off">
<button type="submit" id="submit-btn">Senden</button>

<script>
  const btn = document.getElementById('submit-btn');
  btn.addEventListener('click', () => {
    btn.disabled = true;
    btn.textContent = 'Sende...';
    setTimeout(() => {
      btn.disabled = false;
      btn.textContent = 'Senden';
    }, 3000);
  });
</script>
```

---

## Praktische Beispiele

### Beispiel 1: Registrierungsformular
```html
<form action="/register" method="POST" class="form">
  <fieldset>
    <legend>Account</legend>

    <label for="username">Benutzername: *</label>
    <input type="text" id="username" name="username"
           minlength="3" maxlength="20" required>

    <label for="email">Email: *</label>
    <input type="email" id="email" name="email" required>

    <label for="password">Passwort: *</label>
    <input type="password" id="password" name="password"
           minlength="8" required>

    <label for="password-confirm">Passwort bestätigen: *</label>
    <input type="password" id="password-confirm" name="password-confirm"
           minlength="8" required>
  </fieldset>

  <fieldset>
    <legend>Profil</legend>

    <label for="birthdate">Geburtsdatum:</label>
    <input type="date" id="birthdate" name="birthdate">

    <label for="country">Land:</label>
    <select id="country" name="country" required>
      <option value="">Bitte wählen</option>
      <option value="de">Deutschland</option>
      <option value="at">Österreich</option>
      <option value="ch">Schweiz</option>
    </select>

    <label>
      <input type="checkbox" name="newsletter" value="yes">
      Newsletter abonnieren
    </label>

    <label>
      <input type="checkbox" name="agb" value="yes" required>
      AGB akzeptieren *
    </label>
  </fieldset>

  <button type="submit">Registrieren</button>
  <button type="reset">Zurücksetzen</button>
</form>
```

### Beispiel 2: Kontaktformular mit Validierung
```html
<form id="contact-form" action="/kontakt" method="POST">
  <div class="form-group">
    <label for="name">Name: *</label>
    <input type="text" id="name" name="name" required
           aria-required="true">
    <span class="error" id="name-error"></span>
  </div>

  <div class="form-group">
    <label for="email">Email: *</label>
    <input type="email" id="email" name="email" required
           aria-required="true">
    <span class="error" id="email-error"></span>
  </div>

  <div class="form-group">
    <label for="nachricht">Nachricht: *</label>
    <textarea id="nachricht" name="nachricht" rows="5" required
              aria-required="true"></textarea>
    <span class="error" id="nachricht-error"></span>
  </div>

  <button type="submit">Senden</button>
</form>

<script>
  const form = document.getElementById('contact-form');

  form.addEventListener('submit', (e) => {
    let valid = true;

    // Name prüfen
    const name = document.getElementById('name');
    if (name.value.length < 2) {
      document.getElementById('name-error').textContent = 'Name zu kurz';
      valid = false;
    }

    // Email prüfen
    const email = document.getElementById('email');
    if (!email.value.includes('@')) {
      document.getElementById('email-error').textContent = 'Ungültige Email';
      valid = false;
    }

    if (!valid) {
      e.preventDefault();
    }
  });
</script>
```

---

## Häufige Fehler & Best Practices

### Fehler 1: Fehlende Labels
```html
<!-- ❌ Falsch -->
<input type="text" name="name" placeholder="Name">

<!-- ✅ Gut -->
<label for="name">Name:</label>
<input type="text" id="name" name="name">
```

### Fehler 2: Falsche Input-Typen
```html
<!-- ❌ Falsch -->
<input type="text" name="email" placeholder="Email">

<!-- ✅ Gut -->
<input type="email" name="email" placeholder="email@example.com">
```

### Fehler 3: Keine Validierung
```html
<!-- ❌ Falsch -->
<input type="text" name="username">

<!-- ✅ Gut -->
<input type="text" name="username" required minlength="3" maxlength="20">
```

### Best Practices
1. **Immer Labels** verwenden
2. **Richtige Input-Typen** nutzen
3. **HTML5-Validierung** aktivieren
4. **Pflichtfelder** markieren (* oder `required`)
5. **Barrierefreiheit** (ARIA, Tastatur)
6. **Sicherheit** (CSRF, Escaping)

---

## Zusammenfassung & Checkliste

### Wichtige Konzepte
- ✅ **Globale Attribute**: id, class, title, data-*
- ✅ **Input-Typen**: text, email, password, number, date, etc.
- ✅ **Formular-Elemente**: textarea, select, button, datalist
- ✅ **Validierung**: required, minlength, pattern, etc.
- ✅ **Barrierefreiheit**: Labels, ARIA, Tastatur
- ✅ **Sicherheit**: CSRF, Escaping, Rate-Limiting

### Checkliste für Formulare
- [ ] Alle Felder haben Labels
- [ ] Pflichtfelder markiert
- [ ] Richtige Input-Typen
- [ ] HTML5-Validierung aktiv
- [ ] Barrierefreiheit geprüft
- [ ] Sicherheitsmaßnahmen implementiert

---

## Nächste Schritte

Nachdem du diese Grundlagen beherrschst:
1. **CSS Styling** - Formulare gestalten
2. **JavaScript** - Erweiterte Validierung
3. **AJAX** - Formulare ohne Neuladen
4. **File Uploads** - Dateien verarbeiten

**Empfohlene Ressourcen:**
- [MDN Web Docs - Forms](https://developer.mozilla.org/de/docs/Web/HTML/Element/form)
- [W3Schools Forms](https://www.w3schools.com/html/html_forms.asp)
- [WebAIM - Forms](https://webaim.org/techniques/forms/)
