# XML 1 – Struktur, DTD & XSLT

!!! abstract "Lernziele"
    Nach diesem Kapitel kannst du …

    - XML‑Dokumente **strukturieren** und die **hierarchische** Natur verstehen.
    - **DTD** bzw. **XSD** nutzen, um die Gültigkeit zu prüfen.
    - **XSLT** einsetzen, um XML in HTML oder Text umzuwandeln.
    - **XPath** für Selektoren zu verwenden.
    - XML‑Sicherheit (XXE, XML‑Parsing) berücksichtigen.

---

## Einführung

XML (Extensible Markup Language) beschreibt strukturierte Daten in einem text‑basierten Format. Es ist das Grundgerüst für viele Konfigurations‑, Daten‑ und Austauschformate.

{{ task(file="tasks/01_00_01.yaml") }}

---

## Grundstruktur eines XML‑Dokuments

```xml
<?xml version="1.0" encoding="UTF-8"?>
<library>
    <book id="b1">
        <title>Der große Gatsby</title>
        <author>F. Scott Fitzgerald</author>
    </book>
    <book id="b2">
        <title>1984</title>
        <author>George Orwell</author>
    </book>
</library>
```

* **Prolog** (`<?xml ...?>`) gibt Version und Kodierung an.
* **Root‑Element** (`<library>`) umschließt alle anderen Elemente.
* **Elemente** können **Attribute** besitzen (`id="b1"`).

---

## DTD / XSD – Validierung

### DTD

```dtd
<!ELEMENT library (book+)>
<!ELEMENT book (title, author)>
<!ATTLIST book id ID #REQUIRED>
```

### XSD

```xml
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="library">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="book" maxOccurs="unbounded">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:element name="title" type="xsd:string"/>
              <xsd:element name="author" type="xsd:string"/>
            </xsd:sequence>
            <xsd:attribute name="id" type="xsd:ID" use="required"/>
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema>
```

---

## XSLT – Transformation

```xslt
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <html><body>
            <h1>Book List</h1>
            <ul>
                <xsl:for-each select="library/book">
                    <li>
                        <xsl:value-of select="title"/> by
                        <xsl:value-of select="author"/>
                    </li>
                </xsl:for-each>
            </ul>
        </body></html>
    </xsl:template>
</xsl:stylesheet>
```

---

## XPath – Selektoren

| Ausdruck | Bedeutung |
|---|---|
| `/library/book` | Alle `book`‑Knoten im Dokument |
| `//author[text()="George Orwell"]` | `author`‑Knoten mit Text "George Orwell" |
| `@id='b1'` | Attribut `id` gleich "b1" |

---

## Sicherheitshinweis

XML‑Parsing kann **XXE‑Angriffe** auslösen. Verwende stets sichere Parser‑Optionen (z. B. `disableEntity` in Java, `XmlReaderSettings` in .NET) und überlege, ob du überhaupt externe DTDs zulassen solltest.

---

## Aufgaben & Übungen

Die Aufgaben behandeln die Erstellung, Validierung und Transformation von XML‑Dokumenten.

{{ task(file="tasks/01_00_02.yaml") }}

{{ youtube_video("https://www.youtube.com/embed/ItbLHoFt9ac") }}

---

## Zusammenfassung

XML ist ein leistungsfähiges Format für strukturierte Daten. Mit DTD/XSD für Validierung, XSLT für Transformationen und XPath für selektive Abfragen kannst du robuste Datenverarbeitung implementieren.
